(this["webpackJsonpcube-timer"]=this["webpackJsonpcube-timer"]||[]).push([[0],{12:function(t,e,n){},13:function(t,e,n){},15:function(t,e,n){"use strict";n.r(e);var r,c=n(0),a=n(1),i=n.n(a),u=n(6),o=n.n(u),s=(n(12),n(2)),l=(n(13),n(3)),d=n.n(l),f=n(4),v="eb0e77c3-af14-4b7f-ac80-d3631dc386ac";function N(t,e){return t!==r.CONNECTED?"#f5f2f0":e>=10&&e<20?"#f22d54":e>=20&&e<30?"#41c248":"#f5f2f0"}function b(t){return-1===t?"DNF":new Date(Math.max(0,t)).toISOString().substr(14,9).replace(/^[0:]+(?!\.)/,"")}function O(){var t=i.a.useState(0),e=Object(s.a)(t,2),n=e[0],r=e[1],a=i.a.useRef(),u=i.a.useRef(),o=function t(e){if(void 0!==u.current){var n=e-u.current;r((function(t){return t+n}))}u.current=e,a.current=requestAnimationFrame(t)};return i.a.useEffect((function(){return a.current=requestAnimationFrame(o),function(){return cancelAnimationFrame(a.current)}}),[]),Object(c.jsx)("span",{className:"duration",children:b(n)})}function j(t){var e=t.timerState,n=t.timerDuration,r=e>=20&&e<30,a=e>=10&&e<20,i=!r&&!a;return Object(c.jsxs)(c.Fragment,{children:[i&&0!==n.duration&&Object(c.jsx)("span",{className:"duration",children:b(n.duration)}),i&&0===n.duration&&Object(c.jsx)(c.Fragment,{children:"Ready!"}),r&&Object(c.jsx)(O,{}),a&&Object(c.jsx)(c.Fragment,{children:"Inspection"})]})}!function(t){t[t.NOT_CONNECTED=0]="NOT_CONNECTED",t[t.CONNECTING=1]="CONNECTING",t[t.CONNECTED=2]="CONNECTED"}(r||(r={}));var m=function(){var t=function(){var t=i.a.useState(null),e=Object(s.a)(t,2),n=e[0],c=e[1],a=i.a.useState(null),u=Object(s.a)(a,2),o=u[0],l=u[1],N=i.a.useState(0),b=Object(s.a)(N,2),O=b[0],j=b[1],m=i.a.useState({epoch:0,duration:0}),C=Object(s.a)(m,2),h=C[0],p=C[1],x=function(){var t=Object(f.a)(d.a.mark((function t(){var e;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,navigator.bluetooth.requestDevice({filters:[{services:[v]}]});case 2:e=t.sent,l(e);case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),E=function(){var t=Object(f.a)(d.a.mark((function t(){return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:l(null);case 1:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return i.a.useEffect((function(){if(!o)return function(){};var t=function(){var e=Object(f.a)(d.a.mark((function e(){var n,r,a,i,u;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,null===(n=o.gatt)||void 0===n?void 0:n.connect();case 2:return r=e.sent,o.ongattserverdisconnected=function(){c(null),t()},e.next=6,null===r||void 0===r?void 0:r.getPrimaryService(v);case 6:return a=e.sent,e.next=9,null===a||void 0===a?void 0:a.getCharacteristic("eb0e77c3-af14-4b7f-ac80-d3631dc386ad");case 9:return(i=e.sent).oncharacteristicvaluechanged=function(){var t=i.value.getUint32(0,!0),e=i.value.byteLength>4?i.value.getInt32(4,!0):0;p({epoch:t,duration:e})},null===i||void 0===i||i.startNotifications(),e.next=14,null===a||void 0===a?void 0:a.getCharacteristic("eb0e77c3-af14-4b7f-ac80-d3631dc386ae");case 14:return(u=e.sent).oncharacteristicvaluechanged=function(){var t;j((null===u||void 0===u||null===(t=u.value)||void 0===t?void 0:t.getUint32(0,!0))||0)},null===u||void 0===u||u.startNotifications(),e.next=19,null===i||void 0===i?void 0:i.readValue();case 19:return e.next=21,null===u||void 0===u?void 0:u.readValue();case 21:c(r);case 22:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return t(),function(){null===n||void 0===n||n.disconnect(),c(null)}}),[o]),{connect:x,disconnect:E,connectionState:o?n?r.CONNECTED:r.CONNECTING:r.NOT_CONNECTED,timerDuration:h,timerState:O}}(),e=t.connect,n=(t.disconnect,t.connectionState),a=t.timerState,u=t.timerDuration;return Object(c.jsx)("div",{className:"background",style:{backgroundColor:N(n,a)},children:Object(c.jsxs)("div",{className:"main",children:[n===r.NOT_CONNECTED&&Object(c.jsx)(c.Fragment,{children:Object(c.jsx)("button",{className:"button",onClick:e,children:"Connect Cube Timer!"})}),n===r.CONNECTING&&Object(c.jsx)(c.Fragment,{children:"Connecting..."}),n===r.CONNECTED&&Object(c.jsx)(j,{timerState:a,timerDuration:u})]})})};o.a.render(Object(c.jsx)(i.a.StrictMode,{children:Object(c.jsx)(m,{})}),document.getElementById("root"))}},[[15,1,2]]]);
//# sourceMappingURL=main.7d223e3d.chunk.js.map