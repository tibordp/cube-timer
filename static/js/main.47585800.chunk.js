(this["webpackJsonpcube-timer"]=this["webpackJsonpcube-timer"]||[]).push([[0],{12:function(e,t,n){},13:function(e,t,n){},15:function(e,t,n){"use strict";n.r(t);var r,c=n(0),a=n(1),i=n.n(a),u=n(6),o=n.n(u),s=(n(12),n(2)),l=(n(13),n(3)),d=n.n(l),f=n(4),N="eb0e77c3-af14-4b7f-ac80-d3631dc386ac";function b(e,t){var n=t.state;return e!==r.CONNECTED?"#f5f2f0":n>=10&&n<20?"#f22d54":n>=20&&n<30?"#41c248":"#f5f2f0"}function O(e){return-1===e?"DNF":new Date(Math.max(0,e)).toISOString().substr(14,9).replace(/^[0:]+(?!\.)/,"")}function v(){var e=i.a.useState(0),t=Object(s.a)(e,2),n=t[0],r=t[1],a=i.a.useRef(),u=i.a.useRef(),o=function e(t){if(void 0!==u.current){var n=t-u.current;r((function(e){return e+n}))}u.current=t,a.current=requestAnimationFrame(e)};return i.a.useEffect((function(){return a.current=requestAnimationFrame(o),function(){return cancelAnimationFrame(a.current)}}),[]),Object(c.jsx)("span",{className:"duration",children:O(n)})}function j(e){var t=e.timerState,n=t.state,r=(t.epoch,t.duration),a=n>=20&&n<30,i=n>=10&&n<20,u=!a&&!i;return Object(c.jsxs)(c.Fragment,{children:[u&&0!==r&&Object(c.jsx)("span",{className:"duration",children:O(r)}),u&&0===r&&Object(c.jsx)(c.Fragment,{children:"Ready!"}),a&&Object(c.jsx)(v,{}),i&&Object(c.jsx)(c.Fragment,{children:"Inspection"})]})}!function(e){e[e.NOT_CONNECTED=0]="NOT_CONNECTED",e[e.CONNECTING=1]="CONNECTING",e[e.CONNECTED=2]="CONNECTED",e[e.FAILED=3]="FAILED"}(r||(r={}));var C=function(){var e=function(){var e=i.a.useState(null),t=Object(s.a)(e,2),n=t[0],c=t[1],a=i.a.useState(r.NOT_CONNECTED),u=Object(s.a)(a,2),o=u[0],l=u[1],b=i.a.useState(null),O=Object(s.a)(b,2),v=O[0],j=O[1],C=i.a.useState({state:0,epoch:0,duration:0}),h=Object(s.a)(C,2),m=h[0],p=h[1],E=function(){var e=Object(f.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return l(r.CONNECTING),e.prev=1,e.next=4,navigator.bluetooth.requestDevice({filters:[{services:[N]}]});case 4:t=e.sent,j(t),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),l(r.NOT_CONNECTED);case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(){return e.apply(this,arguments)}}(),x=function(){var e=Object(f.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:j(null);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return i.a.useEffect((function(){if(!v)return function(){};var e=function(){var t=Object(f.a)(d.a.mark((function t(){var n,a,i,u;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,null===(n=v.gatt)||void 0===n?void 0:n.connect();case 3:return a=t.sent,c(a),v.ongattserverdisconnected=function(){c(null),l(r.CONNECTING),e()},t.next=8,null===a||void 0===a?void 0:a.getPrimaryService(N);case 8:return i=t.sent,t.next=11,null===i||void 0===i?void 0:i.getCharacteristic("eb0e77c3-af14-4b7f-ac80-d3631dc386ad");case 11:return(u=t.sent).oncharacteristicvaluechanged=function(){var e=u.value.getUint32(0,!0),t=u.value.getUint32(4,!0),n=u.value.byteLength>4?u.value.getInt32(8,!0):0;p({state:e,epoch:t,duration:n})},t.next=15,null===u||void 0===u?void 0:u.readValue();case 15:null===u||void 0===u||u.startNotifications(),l(r.CONNECTED),t.next=23;break;case 19:t.prev=19,t.t0=t.catch(0),console.error(t.t0),l(r.FAILED);case 23:case"end":return t.stop()}}),t,null,[[0,19]])})));return function(){return t.apply(this,arguments)}}();return e(),function(){null===n||void 0===n||n.disconnect(),c(null)}}),[v]),{connect:E,disconnect:x,connectionState:o,timerState:m}}(),t=e.connect,n=(e.disconnect,e.connectionState),a=e.timerState;return Object(c.jsx)("div",{className:"background",style:{backgroundColor:b(n,a)},children:Object(c.jsxs)("div",{className:"main",children:[n===r.FAILED&&Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)("p",{children:"Failed to connect :("}),Object(c.jsx)("button",{className:"button",onClick:t,children:"Connect Cube Timer!"})]}),n===r.NOT_CONNECTED&&Object(c.jsx)(c.Fragment,{children:Object(c.jsx)("button",{className:"button",onClick:t,children:"Connect Cube Timer!"})}),n===r.CONNECTING&&Object(c.jsx)(c.Fragment,{children:"Connecting..."}),n===r.CONNECTED&&Object(c.jsx)(j,{timerState:a})]})})};o.a.render(Object(c.jsx)(i.a.StrictMode,{children:Object(c.jsx)(C,{})}),document.getElementById("root"))}},[[15,1,2]]]);
//# sourceMappingURL=main.47585800.chunk.js.map